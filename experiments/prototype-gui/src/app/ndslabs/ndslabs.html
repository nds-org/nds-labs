<section class="container-fluid">
  <!-- Selector(s) Pane -->
  <div class="row">
    <div class="col-md-3">      
      <h4>Services</h4>
      <div>
        <div id="stackSearchHeader">
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1"><i class="fa fa-search"></i></span>
            <input type="text" class="form-control" placeholder="Search..." ng-model="svcQuery" aria-describedby="basic-addon1" />
          </div>
          
          <span class="label label-danger" ng-show="(services | filter : svcQuery).length === 0">No services match the query</span>
        </div>
        
        <table class="table table-striped table-condensed table-hover" ng-hide="(services | filter : svcQuery).length === 0">
          <thead>
            <tr>
              <td width="95%"><strong>NDS Labs Service</strong></td>
              <td width="5%"><strong>Add</strong></td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="stack in stacks | orderBy:'key'| filter : svcQuery">
              <td>{{ stack.label }}</td>
              <td>
                <button class="btn btn-xs btn-primary" ng-click="startWizard(stack)">
                  <i class="fa fa-plus"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
   
    <!-- Configured Stacks --> 
    <div class="col-md-9">
      <div>
        <h4>Configured Stacks</h4>
        <table class="table table-striped table-condensed table-hover">
          <thead>
            <tr>
              <td width="10%"></td>
              <td width="30%"><strong>Stack Name</strong></td>
              <td width="40%"><strong>Stack Services</strong></td>
              <td width="20%"></td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="stack in configuredStacks">
              <td class="text-center">
                 <toggle-switch ng-model="stack.status"><toggle-switch>
              </td>
              <td><pre>{{ stack | json }}</pre></td>
              <td>
                <ul class="fa-ul">
                  <!-- List off our stack's services here -->
                  <li ng-repeat="svc in stack.services">
                    <div class="row">
                      <div class="col-xs-4">
                        <a tabindex="0" uib-popover-template="'/app/ndslabs/subviews/serviceOptionsPopover.html'" popover-title="{{ svc.serviceId | uppercase }}" popover-placement="bottom" popover-trigger="outsideClick" id="{{svc.serviceId}}OptionsDropDownButton" class="btn btn-xs btn-default" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                          <i class="fa fa-gear fa-fw"></i><i class="fa fa-fw fa-caret-down"></i>
                        </a>
                      </div>
                      <div class="col-xs-8">
                        <i ng-if="!showVolume(stack, svc)" class="fa-li fa fa-fw" 
                        ng-style="{ 'color':stack.status ? 'green' : 'red' }"
                        ng-class="{ 'fa-check-circle-o':stack.status, 'fa-times-circle-o':!stack.status }"></i>
                        <i ng-if="showVolume(stack, svc)" class="fa-li fa fa-fw fa-database" style="cursor:pointer;"
                           ng-style="{ 'color':stack.status ? 'green' : 'red' }" 
                           uib-popover-template="'/app/ndslabs/subviews/volumeDetailsPopover.html'" 
                           popover-title="{{ showVolume(stack, svc).name | uppercase }}"
                           popover-placement="bottom" popover-trigger="outsideClick"></i>
                        {{ svc.serviceId }}
                      </div>
                    </div>
                  </li>
                  
                  <!-- The "Add Service" Button -->
                  <li>
                    <div class="row">
                      <div class="col-xs-4">
                        <a class="btn btn-xs btn-success" tabindex="0" uib-popover-template="'/app/ndslabs/subviews/serviceAddPopover.html'" 
                           popover-title="OPTIONAL SERVICES"
                           popover-placement="bottom-left" popover-trigger="outsideClick">
                          <i class="fa fa-plus fa-fw"></i><i class="fa fa-fw fa-caret-down"></i>
                        </a>
                      </div>
                    </div>
                  </li>
                </ul>
              </td>
              <td>
                <button style="display:inline-block;horizontal-align:middle;margin:auto;" class="btn btn-xs btn-danger" ng-click="removeStack(stack)" uib-tooltip="Delete this Stack from your Namespace">
                  <i class="fa fa-times"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  </div>
  
    <!-- Confirm Delete (Modal) -->
  <div id="confirmModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div ng-include ng-src="'/app/ndslabs/subviews/stackDeleteModal.html'" ng-controller="NdsLabsController"></div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</section>
