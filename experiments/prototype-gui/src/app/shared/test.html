<section class="container-fluid">
  <!-- Selector(s) Pane -->
  <div class="row">
    <div class="col-md-3">      
      <h4>Services</h4>
      <div>
        <div ng-hide="disabled">
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1"><i class="fa fa-search"></i></span>
            <input type="text" class="form-control" placeholder="Search..." ng-model="serviceSearchQuery" aria-describedby="basic-addon1" />
          </div>
          
          <span class="label label-danger" ng-show="(services | filter : serviceSearchQuery).length === 0">No services match the query</span>
          
        </div>
        
        <table class="table table-striped table-condensed table-hover" ng-hide="disabled || (services | filter : serviceSearchQuery).length === 0">
          <thead>
            <tr>
              <td width="95%"><strong>NDS Labs Service</strong></td>
              <td width="5%"><strong>Add</strong></td>
            </tr>
          </thead>
          <!-- MouseEnter/Leave are not mobile friendly:  ng-mouseleave="service.showHover = false;" ng-mouseenter="service.showHover = true;" -->
          <tr ng-repeat="service in services | filter : serviceSearchQuery">
            <td>{{ service.label }}</td>
            <td>
              <!-- MouseEnter/Leave are not mobile friendly: ng-show="service.showHover || service.count" -->
              <button class="btn btn-xs btn-success" ng-click="addService(service)" ng-disabled="disabled">
                <i ng-show="!service.count" class="fa fa-plus"></i>
                <span ng-show="service.count">{{ service.count }}</span>
              </button>
            </td>
          </tr>
        </table>
        <tfoot>
          <span ng-show="disabled" class="label label-primary pull-right">Click on the canvas to place the service</span>
        </tfoot>
      </div>
    </div>
    
    <!-- Canvas -->
    <div class="col-md-9" >
      <div>
          <svg style="border-style:dotted;" ng-click="draw($event);disabled=false;" ng-attr-height="{{graph.height}}" ng-attr-width="{{graph.width}}">
              <g ng-repeat="ele in elements | orderBy:'type':true" ng-click="disabled=false">
                  <g ng-switch on="ele.type" my-draggable>
                      <circle ng-click="selectService(ele)" style="cursor:pointer;" ng-switch-when="0" ng-attr-cx="{{ele.x}}" ng-attr-cy="{{ele.y}}" ng-attr-r="{{ele.r}}" stroke-width="{{ele.sw||sw}}" ng-attr-stroke="{{ ele.b }}" class="{'focus':ele.f===1}" ng-mouseenter="ele.b = 'green'" ng-mouseleave="ele.b = 'black'" fill="{{ ele.c }}">
                      </circle>
                      <text ng-mousedown="startDrag($event, ele)" ng-mousemove="moveElement($event, ele)" ng-mouseup="stopDrag($event, ele)" style="cursor:move;" style="margin:0;" ng-switch-when="0" text-anchor="middle" ng-attr-x="{{ ele.x }}" ng-attr-y="{{ ele.y }}" font-family="sans-serif" font-size="15px" ng-mouseenter="ele.b = 'green'" ng-mouseleave="ele.b = 'black'" fill="white">{{ ele.lbl }} ({{ ele.id }})</text>
                       <!-- <image ng-repeat="service in services" ng-switch-when="0" ng-if="service.count>1" sketch:type="MSBitmapLayer" x="-3" y="-3" width="1125" height="798" ng-attr-xlink:href=""></image> -->
                      <path style="stroke: rgba(145,56,178,.4);" ng-switch-when="1" ng-attr-d="M{{ele.lx}} {{ele.ly}} L{{ele.x}} {{ele.y}} Z" stroke-width="{{ele.sw||sw}}"  class="{'focus':ele.f===1}"/>
                  </g>
              </g>
          </svg>
    </div>
  </div>
   
  <div class="row">
    <div class="pull-right">
      <button class="btn btn-lg btn-primary">Commit&nbsp;&nbsp;<i class="fa fa-save"></i></button>
      <button class="btn btn-lg btn-success">Deploy&nbsp;&nbsp;<i class="fa fa-send"></i></button>
    </div>
  </div>
  
  <div class="row">
      <div ng-if="addedServices.length > 0">
        <h4>Added Services</h4>
        <table class="table table-striped table-condensed table-hover">
          <thead>
            <tr>
              <td width="10%"><strong>ID</strong></td>
              <td width="30%"><strong>Type</strong></td>
              <td width="50%"><strong>Connections</strong></td>
              <td width="10%"><strong>Remove</strong></td>
            </tr>
          </thead>
          <tr ng-repeat="service in addedServices" ng-mouseleave="service.showHover = false;" ng-mouseenter="service.showHover = true;">
            <td>{{ service.id }}</td>
            <td>{{ service.label }}</td>
            <td>{{ service.connections }}</td>
            <td class="text-center">
              <button class="btn btn-xs btn-danger" ng-click="removeService(service)">
                <i class="fa fa-times"></i>
              </button>
            </td>
          </tr>
        </table>
      </div>
  </div>
</section>
