<section id="navbar">
  <!-- Fixed navbar -->
  <div sticky class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="{{ home.url }}">{{ home.name | uppercase }}</a>
      </div>
      
      <div class="navbar-collapse collapse">
        <!-- Draw once for the left half of the navbar, and once again for the right -->
        <ul class="nav navbar-nav {{ navFilter === 'right' ? 'navbar-right' : '' }}" ng-repeat="navFilter in ::['left', 'right']">
          <li ng-repeat="nav in navs | navbar:navFilter" ng-class="{ 'active':path.indexOf(nav.url) !== -1, 'dropdown':isArray(nav.url) }">
            <!-- Display names given without URL as text -->
            <span ng-if="!nav.url">{{ nav.name }}</span>
            
            <!-- Navbar Link for a singular string URL -->
            <a ng-if="nav.url && !isArray(nav.url)" href="{{ nav.url }}" >{{ nav.name }}</a>
            
            <!-- Dropdown Menu for a URL array -->
            <a ng-if="isArray(nav.url)" ng-init="nav.isOpen=false" ng-mouseenter="nav.isOpen=!nav.isOpen" ng-mouseleave="nav.isOpen=!nav.isOpen" class="dropdown-toggle" data-toggle="dropdown">{{ nav.name }} <span class="caret"></span></a>
            <ul ng-if="isArray(nav.url)" class="dropdown-menu" ng-class="{ 'open': nav.isOpen, 'dropdown-menu-right':nav.right  }" role="menu">
              <li ng-repeat="innerNav in nav.url" ng-class="{ 'active':path === innerNav.url }" >
                <a href="{{ innerNav.url }}">{{ innerNav.name }}</a>
              </li>
            </ul>
          </li>

	  <!-- Then draw our account settings button -->
          <li ng-controller="LoginController" ng-show="settings.authenticated" ng-if="navFilter === 'right'">
            <a id="dropDownButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              <i class="fa fa-user fa-fw"></i>&nbsp;&nbsp;<i class="fa fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu form-popover pullDown" role="menu" aria-labelledby="dropDownButton" ng-click="$event.stopPropagation();">
              <li>
                <!-- Sub-template for Additional Filters Popout -->
                <div class="panel panel-default">
                  <div class="panel-heading ng-binding">{{ settings.namespace | uppercase }}</div>
                    <div class="panel-body">
                      <button type="button" class="btn btn-xl btn-danger" ng-click="logout()">Logout</button>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div><!--/.nav-collapse eWFsZGEgd2FzIGhlcmU= <-- easter egg -->
    </div>
  </div>
</section>
